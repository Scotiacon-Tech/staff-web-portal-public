import{m as F,u as z,a as j,b as me,c as fe,d as ge,e as he,f as ye,g as pe,h as be,V as Se,i as X,_ as De}from"./index-Db2smv_P.js";import{p as C,i as ee,c as n,r as H,a as O,b as k,g as xe,s as _,o as te,d as Ve,e as Oe,f as Ue,h as Fe,j as Te,k as Ke,m as ae,l as M,n as oe,u as _e,q as i,t as U,v as qe,w as je,x as K,y as Ye,z as Ze,A as We,B as Ie,C as Xe,D as Ge,T as Je,E as G,F as E,G as Qe,H as et,I as J,J as Q,K as ue,L as ie,M as re,N as Be}from"./index-2ndd5mQr.js";import{u as we,V as tt,a as ce}from"./VBtn-CpN2DvJs.js";const q=Symbol.for("vuetify:layout"),ke=Symbol.for("vuetify:layout-item"),ve=1e3,at=C({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Ce=C({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function ot(){const e=ee(q);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Ae(e){const s=ee(q);if(!s)throw new Error("[Vuetify] Could not find injected layout");const t=e.id??`layout-item-${Oe()}`,l=xe("useLayoutItem");Ve(ke,{id:t});const a=_(!1);Ue(()=>a.value=!0),Fe(()=>a.value=!1);const{layoutItemStyles:o,layoutItemScrimStyles:u}=s.register(l,{...e,active:n(()=>a.value?!1:e.active.value),id:t});return Te(()=>s.unregister(t)),{layoutItemStyles:o,layoutRect:s.layoutRect,layoutItemScrimStyles:u}}const lt=(e,s,t,l)=>{let a={top:0,left:0,right:0,bottom:0};const o=[{id:"",layer:{...a}}];for(const u of e){const r=s.get(u),f=t.get(u),h=l.get(u);if(!r||!f||!h)continue;const c={...a,[r.value]:parseInt(a[r.value],10)+(h.value?parseInt(f.value,10):0)};o.push({id:u,layer:c}),a=c}return o};function nt(e){const s=ee(q,null),t=n(()=>s?s.rootZIndex.value-100:ve),l=H([]),a=O(new Map),o=O(new Map),u=O(new Map),r=O(new Map),f=O(new Map),{resizeRef:h,contentRect:c}=we(),x=n(()=>{const g=new Map,V=e.overlaps??[];for(const v of V.filter(b=>b.includes(":"))){const[b,p]=v.split(":");if(!l.value.includes(b)||!l.value.includes(p))continue;const w=a.get(b),P=a.get(p),N=o.get(b),$=o.get(p);!w||!P||!N||!$||(g.set(p,{position:w.value,amount:parseInt(N.value,10)}),g.set(b,{position:P.value,amount:-parseInt($.value,10)}))}return g}),y=n(()=>{const g=[...new Set([...u.values()].map(v=>v.value))].sort((v,b)=>v-b),V=[];for(const v of g){const b=l.value.filter(p=>{var w;return((w=u.get(p))==null?void 0:w.value)===v});V.push(...b)}return lt(V,a,o,r)}),d=n(()=>!Array.from(f.values()).some(g=>g.value)),S=n(()=>y.value[y.value.length-1].layer),A=n(()=>({"--v-layout-left":k(S.value.left),"--v-layout-right":k(S.value.right),"--v-layout-top":k(S.value.top),"--v-layout-bottom":k(S.value.bottom),...d.value?void 0:{transition:"none"}})),I=n(()=>y.value.slice(1).map((g,V)=>{let{id:v}=g;const{layer:b}=y.value[V],p=o.get(v),w=a.get(v);return{id:v,...b,size:Number(p.value),position:w.value}})),m=g=>I.value.find(V=>V.id===g),T=xe("createLayout"),R=_(!1);te(()=>{R.value=!0}),Ve(q,{register:(g,V)=>{let{id:v,order:b,position:p,layoutSize:w,elementSize:P,active:N,disableTransitions:$,absolute:Me}=V;u.set(v,b),a.set(v,p),o.set(v,w),r.set(v,N),$&&f.set(v,$);const le=Ke(ke,T==null?void 0:T.vnode).indexOf(g);le>-1?l.value.splice(le,0,v):l.value.push(v);const ne=n(()=>I.value.findIndex(D=>D.id===v)),Y=n(()=>t.value+y.value.length*2-ne.value*2),He=n(()=>{const D=p.value==="left"||p.value==="right",Z=p.value==="right",$e=p.value==="bottom",se={[p.value]:0,zIndex:Y.value,transform:`translate${D?"X":"Y"}(${(N.value?0:-110)*(Z||$e?-1:1)}%)`,position:Me.value||t.value!==ve?"absolute":"fixed",...d.value?void 0:{transition:"none"}};if(!R.value)return se;const B=I.value[ne.value];if(!B)throw new Error(`[Vuetify] Could not find layout item "${v}"`);const W=x.value.get(v);return W&&(B[W.position]+=W.amount),{...se,height:D?`calc(100% - ${B.top}px - ${B.bottom}px)`:P.value?`${P.value}px`:void 0,left:Z?void 0:`${B.left}px`,right:Z?`${B.right}px`:void 0,top:p.value!=="bottom"?`${B.top}px`:void 0,bottom:p.value!=="top"?`${B.bottom}px`:void 0,width:D?P.value?`${P.value}px`:void 0:`calc(100% - ${B.left}px - ${B.right}px)`}}),Ne=n(()=>({zIndex:Y.value-1}));return{layoutItemStyles:He,layoutItemScrimStyles:Ne,zIndex:Y}},unregister:g=>{u.delete(g),a.delete(g),o.delete(g),r.delete(g),f.delete(g),l.value=l.value.filter(V=>V!==g)},mainRect:S,mainStyles:A,getLayoutItem:m,items:I,layoutRect:c,rootZIndex:t});const L=n(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),ze=n(()=>({zIndex:s?t.value:void 0,position:s?"relative":void 0,overflow:s?"hidden":void 0}));return{layoutClasses:L,layoutStyles:ze,getLayoutItem:m,items:I,layoutRect:c,layoutRef:h}}const st=C({...F(),...at({fullHeight:!0}),...ae()},"VApp"),ut=M()({name:"VApp",props:st(),setup(e,s){let{slots:t}=s;const l=oe(e),{layoutClasses:a,getLayoutItem:o,items:u,layoutRef:r}=nt(e),{rtlClasses:f}=_e();return z(()=>{var h;return i("div",{ref:r,class:["v-application",l.themeClasses.value,a.value,f.value,e.class],style:[e.style]},[i("div",{class:"v-application__wrap"},[(h=t.default)==null?void 0:h.call(t)])])}),{getLayoutItem:o,items:u,theme:l}}}),Re=C({text:String,...F(),...j()},"VToolbarTitle"),Le=M()({name:"VToolbarTitle",props:Re(),setup(e,s){let{slots:t}=s;return z(()=>{const l=!!(t.default||t.text||e.text);return i(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var a;return[l&&i("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(a=t.default)==null?void 0:a.call(t)])]}})}),{}}}),it=[null,"prominent","default","comfortable","compact"],Pe=C({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>it.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...me(),...F(),...fe(),...ge(),...j({tag:"header"}),...ae()},"VToolbar"),de=M()({name:"VToolbar",props:Pe(),setup(e,s){var d;let{slots:t}=s;const{backgroundColorClasses:l,backgroundColorStyles:a}=he(U(e,"color")),{borderClasses:o}=ye(e),{elevationClasses:u}=pe(e),{roundedClasses:r}=be(e),{themeClasses:f}=oe(e),{rtlClasses:h}=_e(),c=_(!!(e.extended||(d=t.extension)!=null&&d.call(t))),x=n(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),y=n(()=>c.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return qe({VBtn:{variant:"text"}}),z(()=>{var m;const S=!!(e.title||t.title),A=!!(t.image||e.image),I=(m=t.extension)==null?void 0:m.call(t);return c.value=!!(e.extended||I),i(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},l.value,o.value,u.value,r.value,f.value,h.value,e.class],style:[a.value,e.style]},{default:()=>[A&&i("div",{key:"image",class:"v-toolbar__image"},[t.image?i(X,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):i(Se,{key:"image-img",cover:!0,src:e.image},null)]),i(X,{defaults:{VTabs:{height:k(x.value)}}},{default:()=>{var T,R,L;return[i("div",{class:"v-toolbar__content",style:{height:k(x.value)}},[t.prepend&&i("div",{class:"v-toolbar__prepend"},[(T=t.prepend)==null?void 0:T.call(t)]),S&&i(Le,{key:"title",text:e.title},{text:t.title}),(R=t.default)==null?void 0:R.call(t),t.append&&i("div",{class:"v-toolbar__append"},[(L=t.append)==null?void 0:L.call(t)])])]}}),i(X,{defaults:{VTabs:{height:k(y.value)}}},{default:()=>[i(tt,null,{default:()=>[c.value&&i("div",{class:"v-toolbar__extension",style:{height:k(y.value)}},[I])]})]})]})}),{contentHeight:x,extensionHeight:y}}}),rt=C({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ct(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=s;let l=0;const a=H(null),o=_(0),u=_(0),r=_(0),f=_(!1),h=_(!1),c=n(()=>Number(e.scrollThreshold)),x=n(()=>je((c.value-o.value)/c.value||0)),y=()=>{const d=a.value;!d||t&&!t.value||(l=o.value,o.value="window"in d?d.pageYOffset:d.scrollTop,h.value=o.value<l,r.value=Math.abs(o.value-c.value))};return K(h,()=>{u.value=u.value||o.value}),K(f,()=>{u.value=0}),te(()=>{K(()=>e.scrollTarget,d=>{var A;const S=d?document.querySelector(d):window;S&&S!==a.value&&((A=a.value)==null||A.removeEventListener("scroll",y),a.value=S,a.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),Te(()=>{var d;(d=a.value)==null||d.removeEventListener("scroll",y)}),t&&K(t,y,{immediate:!0}),{scrollThreshold:c,currentScroll:o,currentThreshold:r,isScrollActive:f,scrollRatio:x,isScrollingUp:h,savedScroll:u}}function Ee(){const e=_(!1);return te(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:n(()=>e.value?void 0:{transition:"none !important"}),isBooted:Ye(e)}}const vt=C({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Pe(),...Ce(),...rt(),height:{type:[Number,String],default:64}},"VAppBar"),dt=M()({name:"VAppBar",props:vt(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:t}=s;const l=H(),a=Ze(e,"modelValue"),o=n(()=>{var T;const m=new Set(((T=e.scrollBehavior)==null?void 0:T.split(" "))??[]);return{hide:m.has("hide"),inverted:m.has("inverted"),collapse:m.has("collapse"),elevate:m.has("elevate"),fadeImage:m.has("fade-image")}}),u=n(()=>{const m=o.value;return m.hide||m.inverted||m.collapse||m.elevate||m.fadeImage||!a.value}),{currentScroll:r,scrollThreshold:f,isScrollingUp:h,scrollRatio:c}=ct(e,{canScroll:u}),x=n(()=>e.collapse||o.value.collapse&&(o.value.inverted?c.value>0:c.value===0)),y=n(()=>e.flat||o.value.elevate&&(o.value.inverted?r.value>0:r.value===0)),d=n(()=>o.value.fadeImage?o.value.inverted?1-c.value:c.value:void 0),S=n(()=>{var R,L;if(o.value.hide&&o.value.inverted)return 0;const m=((R=l.value)==null?void 0:R.contentHeight)??0,T=((L=l.value)==null?void 0:L.extensionHeight)??0;return m+T});We(n(()=>!!e.scrollBehavior),()=>{Xe(()=>{o.value.hide?o.value.inverted?a.value=r.value>f.value:a.value=h.value||r.value<f.value:a.value=!0})});const{ssrBootStyles:A}=Ee(),{layoutItemStyles:I}=Ae({id:e.name,order:n(()=>parseInt(e.order,10)),position:U(e,"location"),layoutSize:S,elementSize:_(void 0),active:a,absolute:U(e,"absolute")});return z(()=>{const m=de.filterProps(e);return i(de,Ie({ref:l,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...I.value,"--v-toolbar-image-opacity":d.value,height:void 0,...A.value},e.style]},m,{collapse:x.value,flat:y.value}),t)}),{}}}),mt=M()({name:"VAppBarTitle",props:Re(),setup(e,s){let{slots:t}=s;return z(()=>i(Le,Ie(e,{class:"v-app-bar-title"}),t)),{}}}),ft=C({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...me(),...F(),...fe(),...Ce(),...ge(),...j({tag:"footer"}),...ae()},"VFooter"),gt=M()({name:"VFooter",props:ft(),setup(e,s){let{slots:t}=s;const{themeClasses:l}=oe(e),{backgroundColorClasses:a,backgroundColorStyles:o}=he(U(e,"color")),{borderClasses:u}=ye(e),{elevationClasses:r}=pe(e),{roundedClasses:f}=be(e),h=_(32),{resizeRef:c}=we(d=>{d.length&&(h.value=d[0].target.clientHeight)}),x=n(()=>e.height==="auto"?h.value:parseInt(e.height,10)),{layoutItemStyles:y}=Ae({id:e.name,order:n(()=>parseInt(e.order,10)),position:n(()=>"bottom"),layoutSize:x,elementSize:n(()=>e.height==="auto"?void 0:x.value),active:n(()=>e.app),absolute:U(e,"absolute")});return z(()=>i(e.tag,{ref:c,class:["v-footer",l.value,a.value,u.value,r.value,f.value,e.class],style:[o.value,e.app?y.value:{height:k(e.height)},e.style]},t)),{}}}),ht=C({scrollable:Boolean,...F(),...j({tag:"main"})},"VMain"),yt=M()({name:"VMain",props:ht(),setup(e,s){let{slots:t}=s;const{mainStyles:l}=ot(),{ssrBootStyles:a}=Ee();return z(()=>i(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[l.value,a.value,e.style]},{default:()=>{var o,u;return[e.scrollable?i("div",{class:"v-main__scroller"},[(o=t.default)==null?void 0:o.call(t)]):(u=t.default)==null?void 0:u.call(t)]}})),{}}}),pt=Be("span",{class:"d-none d-sm-inline"},"Scotiacon",-1),bt=Be("a",{href:"mailto:tech@scotiacon.org.uk",class:"text-decoration-none"}," Contact Scotiacon Tech Team ",-1),_t=Ge({__name:"Default",emits:["pageTitle"],setup(e,{emit:s}){const t=Je.getInstance(),l=t.getTokenByService("AuthAPI"),a=H(!1),o=H(!1),u=H(new Map),r=Qe.getInstance();return r.on("login",f=>{a.value=!0}),r.on("logout",()=>{a.value=!1}),r.on("tokenManager.tokenUpdated",()=>{a.value=!0,o.value=!0}),r.on("tokenManager.sessionExpired",()=>{a.value=!1,o.value=!1,location.reload()}),l?l.AccessExpires<=Date.now()&&l.RefreshExpires>Date.now()?t.refreshToken(l):l.AccessExpires>Date.now()?(a.value=!1,o.value=!0):(a.value=!0,o.value=!0):(a.value=!1,o.value=!0),(f,h)=>{const c=et("RouterView");return J(),G(ut,{class:"bg-image"},{default:E(()=>[i(dt,{color:"primary",density:"compact"},{prepend:E(()=>[i(Se,{alt:"Scotiacon logo showing Scottie dog mascot Wallace as silhouette in front of a Scottish flag",src:De,width:"40"})]),default:E(()=>[i(mt,null,{default:E(()=>[pt,Q(" Team Dashboard ")]),_:1}),a.value?(J(),G(ce,{key:0,"append-icon":ue(ie),href:u.value.get("OAUTH_KEYCLOAK_URL")||"/logout",class:"d-none d-sm-inline-flex"},{default:E(()=>[Q("Logout")]),_:1},8,["append-icon","href"])):re("",!0),a.value?(J(),G(ce,{key:1,icon:ue(ie),href:u.value.get("OAUTH_KEYCLOAK_URL")||"/logout",class:"d-sm-none"},null,8,["icon","href"])):re("",!0)]),_:1}),i(yt,null,{default:E(()=>[i(c)]),_:1}),i(gt,{class:"bg-grey-lighten-1",style:{"max-height":"2rem"}},{default:E(()=>[Q(" Scotiacon Dashboard - Assistance & Enquiries:  "),bt]),_:1})]),_:1})}}});export{_t as default};
