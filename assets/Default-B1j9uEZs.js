import{m as F,u as z,a as Y,b as ye,c as he,d as pe,e as be,f as Se,g as xe,h as Ve,V as Te,i as J,j as Ke,k as je,_ as qe}from"./index-CpOjXsPq.js";import{p as A,i as ae,c as s,r as E,a as O,b as _,g as Ie,s as k,o as le,d as we,e as Ye,f as We,h as Ze,j as ke,k as Xe,m as oe,l as M,n as ne,u as Be,q as r,t as U,v as Ge,w as Je,x as j,y as Qe,z as et,A as Ce,B as _e,C as Ae,D as tt,T as at,E as Q,F as lt,G as ot,H as ee,I as P,J as re,K as te,L as ce,M as ve,N as de}from"./index-UZxHwuFp.js";import{u as He,V as nt,a as me}from"./VBtn-AqSwylYt.js";const q=Symbol.for("vuetify:layout"),Re=Symbol.for("vuetify:layout-item"),fe=1e3,st=A({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Le=A({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function ut(){const e=ae(q);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Pe(e){const i=ae(q);if(!i)throw new Error("[Vuetify] Could not find injected layout");const t=e.id??`layout-item-${Ye()}`,o=Ie("useLayoutItem");we(Re,{id:t});const l=k(!1);We(()=>l.value=!0),Ze(()=>l.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:n}=i.register(o,{...e,active:s(()=>l.value?!1:e.active.value),id:t});return ke(()=>i.unregister(t)),{layoutItemStyles:a,layoutRect:i.layoutRect,layoutItemScrimStyles:n}}const it=(e,i,t,o)=>{let l={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...l}}];for(const n of e){const u=i.get(n),g=t.get(n),v=o.get(n);if(!u||!g||!v)continue;const d={...l,[u.value]:parseInt(l[u.value],10)+(v.value?parseInt(g.value,10):0)};a.push({id:n,layer:d}),l=d}return a};function rt(e){const i=ae(q,null),t=s(()=>i?i.rootZIndex.value-100:fe),o=E([]),l=O(new Map),a=O(new Map),n=O(new Map),u=O(new Map),g=O(new Map),{resizeRef:v,contentRect:d}=He(),S=s(()=>{const y=new Map,I=e.overlaps??[];for(const f of I.filter(x=>x.includes(":"))){const[x,p]=f.split(":");if(!o.value.includes(x)||!o.value.includes(p))continue;const B=l.get(x),H=l.get(p),N=a.get(x),$=a.get(p);!B||!H||!N||!$||(y.set(p,{position:B.value,amount:parseInt(N.value,10)}),y.set(x,{position:H.value,amount:-parseInt($.value,10)}))}return y}),b=s(()=>{const y=[...new Set([...n.values()].map(f=>f.value))].sort((f,x)=>f-x),I=[];for(const f of y){const x=o.value.filter(p=>{var B;return((B=n.get(p))==null?void 0:B.value)===f});I.push(...x)}return it(I,l,a,u)}),h=s(()=>!Array.from(g.values()).some(y=>y.value)),m=s(()=>b.value[b.value.length-1].layer),T=s(()=>({"--v-layout-left":_(m.value.left),"--v-layout-right":_(m.value.right),"--v-layout-top":_(m.value.top),"--v-layout-bottom":_(m.value.bottom),...h.value?void 0:{transition:"none"}})),V=s(()=>b.value.slice(1).map((y,I)=>{let{id:f}=y;const{layer:x}=b.value[I],p=a.get(f),B=l.get(f);return{id:f,...x,size:Number(p.value),position:B.value}})),R=y=>V.value.find(I=>I.id===y),c=Ie("createLayout"),w=k(!1);le(()=>{w.value=!0}),we(q,{register:(y,I)=>{let{id:f,order:x,position:p,layoutSize:B,elementSize:H,active:N,disableTransitions:$,absolute:$e}=I;n.set(f,x),l.set(f,p),a.set(f,B),u.set(f,N),$&&g.set(f,$);const se=Xe(Re,c==null?void 0:c.vnode).indexOf(y);se>-1?o.value.splice(se,0,f):o.value.push(f);const ue=s(()=>V.value.findIndex(D=>D.id===f)),W=s(()=>t.value+b.value.length*2-ue.value*2),De=s(()=>{const D=p.value==="left"||p.value==="right",Z=p.value==="right",Ue=p.value==="bottom",X=H.value??B.value,Fe=X===0?"%":"px",ie={[p.value]:0,zIndex:W.value,transform:`translate${D?"X":"Y"}(${(N.value?0:-(X===0?100:X))*(Z||Ue?-1:1)}${Fe})`,position:$e.value||t.value!==fe?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!w.value)return ie;const C=V.value[ue.value];if(!C)throw new Error(`[Vuetify] Could not find layout item "${f}"`);const G=S.value.get(f);return G&&(C[G.position]+=G.amount),{...ie,height:D?`calc(100% - ${C.top}px - ${C.bottom}px)`:H.value?`${H.value}px`:void 0,left:Z?void 0:`${C.left}px`,right:Z?`${C.right}px`:void 0,top:p.value!=="bottom"?`${C.top}px`:void 0,bottom:p.value!=="top"?`${C.bottom}px`:void 0,width:D?H.value?`${H.value}px`:void 0:`calc(100% - ${C.left}px - ${C.right}px)`}}),Oe=s(()=>({zIndex:W.value-1}));return{layoutItemStyles:De,layoutItemScrimStyles:Oe,zIndex:W}},unregister:y=>{n.delete(y),l.delete(y),a.delete(y),u.delete(y),g.delete(y),o.value=o.value.filter(I=>I!==y)},mainRect:m,mainStyles:T,getLayoutItem:R,items:V,layoutRect:d,rootZIndex:t});const L=s(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),K=s(()=>({zIndex:i?t.value:void 0,position:i?"relative":void 0,overflow:i?"hidden":void 0}));return{layoutClasses:L,layoutStyles:K,getLayoutItem:R,items:V,layoutRect:d,layoutRef:v}}const ct=A({...F(),...st({fullHeight:!0}),...oe()},"VApp"),vt=M()({name:"VApp",props:ct(),setup(e,i){let{slots:t}=i;const o=ne(e),{layoutClasses:l,getLayoutItem:a,items:n,layoutRef:u}=rt(e),{rtlClasses:g}=Be();return z(()=>{var v;return r("div",{ref:u,class:["v-application",o.themeClasses.value,l.value,g.value,e.class],style:[e.style]},[r("div",{class:"v-application__wrap"},[(v=t.default)==null?void 0:v.call(t)])])}),{getLayoutItem:a,items:n,theme:o}}}),Ee=A({text:String,...F(),...Y()},"VToolbarTitle"),ze=M()({name:"VToolbarTitle",props:Ee(),setup(e,i){let{slots:t}=i;return z(()=>{const o=!!(t.default||t.text||e.text);return r(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var l;return[o&&r("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(l=t.default)==null?void 0:l.call(t)])]}})}),{}}}),dt=[null,"prominent","default","comfortable","compact"],Me=A({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>dt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ye(),...F(),...he(),...pe(),...Y({tag:"header"}),...oe()},"VToolbar"),ge=M()({name:"VToolbar",props:Me(),setup(e,i){var h;let{slots:t}=i;const{backgroundColorClasses:o,backgroundColorStyles:l}=be(U(e,"color")),{borderClasses:a}=Se(e),{elevationClasses:n}=xe(e),{roundedClasses:u}=Ve(e),{themeClasses:g}=ne(e),{rtlClasses:v}=Be(),d=k(!!(e.extended||(h=t.extension)!=null&&h.call(t))),S=s(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),b=s(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Ge({VBtn:{variant:"text"}}),z(()=>{var R;const m=!!(e.title||t.title),T=!!(t.image||e.image),V=(R=t.extension)==null?void 0:R.call(t);return d.value=!!(e.extended||V),r(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},o.value,a.value,n.value,u.value,g.value,v.value,e.class],style:[l.value,e.style]},{default:()=>[T&&r("div",{key:"image",class:"v-toolbar__image"},[t.image?r(J,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):r(Te,{key:"image-img",cover:!0,src:e.image},null)]),r(J,{defaults:{VTabs:{height:_(S.value)}}},{default:()=>{var c,w,L;return[r("div",{class:"v-toolbar__content",style:{height:_(S.value)}},[t.prepend&&r("div",{class:"v-toolbar__prepend"},[(c=t.prepend)==null?void 0:c.call(t)]),m&&r(ze,{key:"title",text:e.title},{text:t.title}),(w=t.default)==null?void 0:w.call(t),t.append&&r("div",{class:"v-toolbar__append"},[(L=t.append)==null?void 0:L.call(t)])])]}}),r(J,{defaults:{VTabs:{height:_(b.value)}}},{default:()=>[r(nt,null,{default:()=>[d.value&&r("div",{class:"v-toolbar__extension",style:{height:_(b.value)}},[V])]})]})]})}),{contentHeight:S,extensionHeight:b}}}),mt=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ft(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=i;let o=0,l=0;const a=E(null),n=k(0),u=k(0),g=k(0),v=k(!1),d=k(!1),S=s(()=>Number(e.scrollThreshold)),b=s(()=>Je((S.value-n.value)/S.value||0)),h=()=>{const m=a.value;if(!m||t&&!t.value)return;o=n.value,n.value="window"in m?m.pageYOffset:m.scrollTop;const T=m instanceof Window?document.documentElement.scrollHeight:m.scrollHeight;if(l!==T){l=T;return}d.value=n.value<o,g.value=Math.abs(n.value-S.value)};return j(d,()=>{u.value=u.value||n.value}),j(v,()=>{u.value=0}),le(()=>{j(()=>e.scrollTarget,m=>{var V;const T=m?document.querySelector(m):window;T&&T!==a.value&&((V=a.value)==null||V.removeEventListener("scroll",h),a.value=T,a.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),ke(()=>{var m;(m=a.value)==null||m.removeEventListener("scroll",h)}),t&&j(t,h,{immediate:!0}),{scrollThreshold:S,currentScroll:n,currentThreshold:g,isScrollActive:v,scrollRatio:b,isScrollingUp:d,savedScroll:u}}function Ne(){const e=k(!1);return le(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:s(()=>e.value?void 0:{transition:"none !important"}),isBooted:Qe(e)}}const gt=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Me(),...Le(),...mt(),height:{type:[Number,String],default:64}},"VAppBar"),yt=M()({name:"VAppBar",props:gt(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:t}=i;const o=E(),l=et(e,"modelValue"),a=s(()=>{var w;const c=new Set(((w=e.scrollBehavior)==null?void 0:w.split(" "))??[]);return{hide:c.has("hide"),fullyHide:c.has("fully-hide"),inverted:c.has("inverted"),collapse:c.has("collapse"),elevate:c.has("elevate"),fadeImage:c.has("fade-image")}}),n=s(()=>{const c=a.value;return c.hide||c.fullyHide||c.inverted||c.collapse||c.elevate||c.fadeImage||!l.value}),{currentScroll:u,scrollThreshold:g,isScrollingUp:v,scrollRatio:d}=ft(e,{canScroll:n}),S=s(()=>a.value.hide||a.value.fullyHide),b=s(()=>e.collapse||a.value.collapse&&(a.value.inverted?d.value>0:d.value===0)),h=s(()=>e.flat||a.value.fullyHide&&!l.value||a.value.elevate&&(a.value.inverted?u.value>0:u.value===0)),m=s(()=>a.value.fadeImage?a.value.inverted?1-d.value:d.value:void 0),T=s(()=>{var L,K;if(a.value.hide&&a.value.inverted)return 0;const c=((L=o.value)==null?void 0:L.contentHeight)??0,w=((K=o.value)==null?void 0:K.extensionHeight)??0;return S.value?u.value<g.value||a.value.fullyHide?c+w:c:c+w});Ce(s(()=>!!e.scrollBehavior),()=>{Ae(()=>{S.value?a.value.inverted?l.value=u.value>g.value:l.value=v.value||u.value<g.value:l.value=!0})});const{ssrBootStyles:V}=Ne(),{layoutItemStyles:R}=Pe({id:e.name,order:s(()=>parseInt(e.order,10)),position:U(e,"location"),layoutSize:T,elementSize:k(void 0),active:l,absolute:U(e,"absolute")});return z(()=>{const c=ge.filterProps(e);return r(ge,_e({ref:o,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...R.value,"--v-toolbar-image-opacity":m.value,height:void 0,...V.value},e.style]},c,{collapse:b.value,flat:h.value}),t)}),{}}}),ht=M()({name:"VAppBarTitle",props:Ee(),setup(e,i){let{slots:t}=i;return z(()=>r(ze,_e(e,{class:"v-app-bar-title"}),t)),{}}}),pt=A({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ye(),...F(),...he(),...Le(),...pe(),...Y({tag:"footer"}),...oe()},"VFooter"),bt=M()({name:"VFooter",props:pt(),setup(e,i){let{slots:t}=i;const o=E(),{themeClasses:l}=ne(e),{backgroundColorClasses:a,backgroundColorStyles:n}=be(U(e,"color")),{borderClasses:u}=Se(e),{elevationClasses:g}=xe(e),{roundedClasses:v}=Ve(e),d=k(32),{resizeRef:S}=He(h=>{h.length&&(d.value=h[0].target.clientHeight)}),b=s(()=>e.height==="auto"?d.value:parseInt(e.height,10));return Ce(()=>e.app,()=>{const h=Pe({id:e.name,order:s(()=>parseInt(e.order,10)),position:s(()=>"bottom"),layoutSize:b,elementSize:s(()=>e.height==="auto"?void 0:b.value),active:s(()=>e.app),absolute:U(e,"absolute")});Ae(()=>{o.value=h.layoutItemStyles.value})}),z(()=>r(e.tag,{ref:S,class:["v-footer",l.value,a.value,u.value,g.value,v.value,e.class],style:[n.value,e.app?o.value:{height:_(e.height)},e.style]},t)),{}}}),St=A({scrollable:Boolean,...F(),...Ke(),...Y({tag:"main"})},"VMain"),xt=M()({name:"VMain",props:St(),setup(e,i){let{slots:t}=i;const{dimensionStyles:o}=je(e),{mainStyles:l}=ut(),{ssrBootStyles:a}=Ne();return z(()=>r(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[l.value,a.value,o.value,e.style]},{default:()=>{var n,u;return[e.scrollable?r("div",{class:"v-main__scroller"},[(n=t.default)==null?void 0:n.call(t)]):(u=t.default)==null?void 0:u.call(t)]}})),{}}}),kt=tt({__name:"Default",emits:["pageTitle"],setup(e,{emit:i}){const t=at.getInstance(),o=t.getTokenByService("AuthAPI"),l=E(!1),a=E(!1),n=E(new Map),u=lt.getInstance();return u.on("login",g=>{l.value=!0}),u.on("logout",()=>{l.value=!1}),u.on("tokenManager.tokenUpdated",()=>{l.value=!0,a.value=!0}),u.on("tokenManager.sessionExpired",()=>{l.value=!1,a.value=!1,location.reload()}),o?o.AccessExpires<=Date.now()&&o.RefreshExpires>Date.now()?t.refreshToken(o):o.AccessExpires>Date.now()?(l.value=!1,a.value=!0):(l.value=!0,a.value=!0):(l.value=!1,a.value=!0),(g,v)=>{const d=ot("RouterView");return ee(),Q(vt,{class:"bg-image"},{default:P(()=>[r(yt,{color:"primary",density:"compact"},{prepend:P(()=>[r(Te,{alt:"Scotiacon logo showing Scottie dog mascot Wallace as silhouette in front of a Scottish flag",src:qe,width:"40"})]),default:P(()=>[r(ht,null,{default:P(()=>v[0]||(v[0]=[re("span",{class:"d-none d-sm-inline"},"Scotiacon",-1),te(" Team Dashboard ")])),_:1}),l.value?(ee(),Q(me,{key:0,"append-icon":ce(ve),href:n.value.get("OAUTH_KEYCLOAK_URL")||"/logout",class:"d-none d-sm-inline-flex"},{default:P(()=>v[1]||(v[1]=[te("Logout")])),_:1},8,["append-icon","href"])):de("",!0),l.value?(ee(),Q(me,{key:1,icon:ce(ve),href:n.value.get("OAUTH_KEYCLOAK_URL")||"/logout",class:"d-sm-none"},null,8,["icon","href"])):de("",!0)]),_:1}),r(xt,null,{default:P(()=>[r(d)]),_:1}),r(bt,{class:"bg-grey-lighten-1 flex-grow-0"},{default:P(()=>v[2]||(v[2]=[te(" Scotiacon Dashboard - Assistance & Enquiries:  "),re("a",{href:"mailto:tech@scotiacon.org.uk",class:"text-decoration-none"}," Contact Scotiacon Tech Team ",-1)])),_:1})]),_:1})}}});export{kt as default};
