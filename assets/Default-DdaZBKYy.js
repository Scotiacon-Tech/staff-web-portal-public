import{p as f,m as y,g as v,a as _,u as k,c as l,s as h,o as w,b as B,r as V,d as A,T as C,e as m,f as M,w as p,E as R,h as T,i as x}from"./index-b0FTYAfH.js";import{m as d,u as g,a as P}from"./tag-L2Sn6D-i.js";import{m as b,c as E,u as S}from"./layout-Cf2Copvt.js";const I=f({...d(),...b({fullHeight:!0}),...y()},"VApp"),D=v()({name:"VApp",props:I(),setup(e,r){let{slots:a}=r;const t=_(e),{layoutClasses:s,getLayoutItem:o,items:n,layoutRef:c}=E(e),{rtlClasses:i}=k();return g(()=>{var u;return l("div",{ref:c,class:["v-application",t.themeClasses.value,s.value,i.value,e.class],style:[e.style]},[l("div",{class:"v-application__wrap"},[(u=a.default)==null?void 0:u.call(a)])])}),{getLayoutItem:o,items:n,theme:t}}});function L(){const e=h(!1);return w(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:B(()=>e.value?void 0:{transition:"none !important"}),isBooted:V(e)}}const F=f({scrollable:Boolean,...d(),...P({tag:"main"})},"VMain"),q=v()({name:"VMain",props:F(),setup(e,r){let{slots:a}=r;const{mainStyles:t}=S(),{ssrBootStyles:s}=L();return g(()=>l(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[t.value,s.value,e.style]},{default:()=>{var o,n;return[e.scrollable?l("div",{class:"v-main__scroller"},[(o=a.default)==null?void 0:o.call(a)]):(n=a.default)==null?void 0:n.call(a)]}})),{}}}),N=A({__name:"Default",emits:["pageTitle"],setup(e,{emit:r}){const a=C.getInstance(),t=a.getTokenByService("GrazeAPI"),s=m(!1),o=m(!1),n=R.getInstance();return n.on("login",c=>{s.value=!0}),n.on("logout",()=>{s.value=!1}),n.on("tokenManager.tokenUpdated",()=>{s.value=!0,o.value=!0}),n.on("tokenManager.sessionExpired",()=>{s.value=!1,o.value=!1,location.reload()}),t?t.AccessExpires<=Date.now()&&t.RefreshExpires>Date.now()?a.refreshToken(t):t.AccessExpires>Date.now()?(s.value=!1,o.value=!0):(s.value=!0,o.value=!0):(s.value=!1,o.value=!0),(c,i)=>{const u=T("RouterView");return x(),M(D,{class:"bg-image"},{default:p(()=>[l(q,null,{default:p(()=>[l(u)]),_:1})]),_:1})}}});export{N as default};
